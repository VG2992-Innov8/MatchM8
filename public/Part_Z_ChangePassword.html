<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Change Password</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 2rem;
    }
    input {
      margin: 0.5rem;
      padding: 0.5rem;
      width: 250px;
    }
    button {
      padding: 0.5rem 1rem;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <h2>Change Your Password</h2>
  <input type="password" id="oldPassword" placeholder="Current Password" /><br />
  <input type="password" id="newPassword" placeholder="New Password" /><br />
  <input type="password" id="confirmPassword" placeholder="Confirm New Password" /><br />
  <button onclick="changePassword()">Update Password</button>

  <p id="message"></p>

  <script>
    async function changePassword() {
      const oldPassword = document.getElementById('oldPassword').value;
      const newPassword = document.getElementById('newPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      const msg = document.getElementById('message');

      msg.textContent = '';

      if (newPassword !== confirmPassword) {
        msg.textContent = 'New passwords do not match.';
        msg.style.color = 'red';
        return;
      }

     const res = await fetch('/auth/password/change', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    name: prompt("Enter your username:"),
    oldPassword,
    newPassword
  })
});


      const data = await res.json();

      if (data.success) {
        msg.textContent = 'Password changed successfully!';
        msg.style.color = 'green';
      } else {
        msg.textContent = data.message || 'Failed to change password.';
        msg.style.color = 'red';
      }
    }
  </script>
</body>
</html>
